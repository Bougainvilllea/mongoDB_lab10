// Импорт библиотеки Mongoose для работы с MongoDB
const mongoose = require('mongoose');

// Создание схемы (структуры) для модели Review (отзыв)
const ReviewSchema = new mongoose.Schema({
  // Поле "userName" - имя пользователя, оставившего отзыв
  userName: {
    type: String, // Тип данных - строка
    required: [true, 'Пожалуйста, укажите имя'], // Обязательное поле с сообщением об ошибке
    trim: true, // Автоматическое удаление пробелов в начале и конце строки
    maxlength: [50, 'Имя не может превышать 50 символов'] // Максимальная длина с сообщением об ошибке
  },
  
  // Поле "text" - текст отзыва
  text: {
    type: String, // Тип данных - строка
    required: [true, 'Пожалуйста, добавьте текст отзыва'], // Обязательное поле с сообщением об ошибке
    maxlength: [500, 'Отзыв не может превышать 500 символов'] // Максимальная длина с сообщением об ошибке
  },
  
  // Поле "rating" - оценка (рейтинг) от 1 до 10
  rating: {
    type: Number, // Тип данных - число
    required: [true, 'Пожалуйста, укажите оценку от 1 до 10'], // Обязательное поле с сообщением об ошибке
    min: 1, // Минимальное значение
    max: 10 // Максимальное значение
  },
  
  // Поле "createdAt" - дата создания отзыва
  createdAt: {
    type: Date, // Тип данных - дата
    default: Date.now // Значение по умолчанию - текущая дата и время
  }
});

// Экспорт модели Review на основе созданной схемы
// Модель будет доступна в других файлах через require('./Review')
module.exports = mongoose.model('Review', ReviewSchema);
